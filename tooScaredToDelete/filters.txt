if(type=='number' || type == 'date'){
        let inputs = headers[col].querySelectorAll('input')
        if(inputs){
            inputs.forEach((input) => {headers[col].removeChild(input)})
        }
        const num = document.createElement('input')
        type == 'number' ? num.setAttribute('type', 'number') : num.setAttribute('type', 'date')
        headers[col].appendChild(num)
        if(filterValue == 'BETWEEN'){
            const num2 = document.createElement('input')
            type == 'number' ? num2.setAttribute('type', 'number') : num2.setAttribute('type', 'date')
            headers[col].appendChild(num2)
            num.onchange = () => checkRange(type, col, filterValue, num, num2)
            num2.onchange = () => checkRange(type, col, filterValue, num, num2)
        }
        else{num.onchange = () => checkRange(type, col, filterValue, num)}
    }
    else if(type='value'){
        rowsArray.forEach((row, index) => {
            let value = row.cells[col].textContent
            if(type == 'value' && value == filterValue){
                const toClear = check.filter(cell => (cell.row == index && cell.col == col))
                toClear.forEach((cell) => cell.show = true)
            }
            else{
                const toClear = check.filter(cell => (cell.row == index && cell.col == col))
                toClear.forEach((cell) => cell.show = false)
            }
        });
    }



    function checkRange(type, col, operator, input1, input2=null){
    let num = input1.value
    if(num == ''){
        const toClear = check.filter(cell => (cell.row == index && cell.col == col))
        toClear.forEach((cell) => cell.show = true)
        return
    }
    let table = document.querySelector('.sortable-table');
    const headers = table.querySelectorAll('th')
    const tableBody = table.tBodies[0]
    const rowsArray = Array.from(tableBody.rows)
    rowsArray.forEach((row, index) => {
        let display = false
        let value = row.cells[col].textContent
        if(type=='number'){
            num = parseFloat(num)
            value = parseFloat(value)
            if(operator == 'EQUAL TO' && value == num){
                display = true
            }
            else if(operator == 'GREATER THAN' && value > num){
                display = true
            }
            else if(operator == 'LESS THAN' && value < num){
                display = true
            }
            else if(operator == 'BETWEEN'){
                let num2 = parseFloat(input2.value)
                if(value >= num && value <= num2){
                    display = true
                }
            }
        }
        else{
            num = new Date(num)
            value = new Date(value)
            num.setHours(0,0,0,0)
            value.setHours(0,0,0,0)
            if(operator == 'EQUAL TO' && value.getTime() == num.getTime()){
                display = true
            }
            else if(operator == 'GREATER THAN' && value.getTime() > num.getTime()){
                display = true
            }
            else if(operator == 'LESS THAN' && +value < +num){
                display = true
            }
            else if(operator == 'BETWEEN'){
                let num2 = input2.value
                num2 = new Date(num2)
                num2.setHours(0,0,0,0)
                if(value >= +num && value <= +num2){
                    display = true
                }
            }
        }
        const toShow = check.filter(cell => (cell.row == index && cell.col == col))
        toShow.forEach((cell) => cell.show = display)
    });
    checkRows()
}

function searchRecords(){
    const search = document.querySelector('.search-records')
    const searchValue = search.value.trim().toLowerCase()
    let table = document.querySelector('.sortable-table');
    const tableBody = table.tBodies[0]
    const rowsArray = Array.from(tableBody.rows)
    rowsArray.forEach((row) => {
        let value = row.cells[0].textContent.trim().toLowerCase()
        if(value.includes(searchValue) || searchValue == ''){
            row.style.display = ''
        }
        else{
            row.style.display = 'none'
        }
    });  
}